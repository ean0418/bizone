<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.flex.bizone.loan.LoanMapper">


    <!-- 찜한 대출상품 추가 -->
    <insert id="addFavorite">
        INSERT INTO bizone_favorites (bf_bm_id, bf_product_name, bf_loan_limit, bf_interest_rate, bf_qualification, bf_created_date)
        VALUES (#{bf_bm_id}, #{bf_product_name}, #{bf_loan_limit}, #{bf_interest_rate}, #{bf_qualification}, NOW())
    </insert>

    <!-- 특정 사용자의 찜한 대출상품 목록 조회 -->
    <select id="getFavoritesByMemberId" resultType="com.flex.bizone.loan.Bizone_favorites">
        SELECT bf_id, bf_bm_id, bf_product_name, bf_loan_limit, bf_interest_rate, bf_qualification, bf_created_date
        FROM bizone_favorites
        WHERE bf_bm_id = #{bm_id}
    </select>

    <!-- 찜한 대출상품 삭제 -->
    <delete id="deleteFavoriteById">
        DELETE FROM bizone_favorites WHERE bf_id = #{bf_id}
    </delete>

    <!-- 특정 상품이 찜한 상태인지 확인 -->
    <select id="isFavorite" resultType="int">
        SELECT COUNT(*) FROM bizone_favorites
        WHERE bf_bm_id = #{bf_bm_id} AND bf_product_name = #{bf_product_name}
    </select>

</mapper>